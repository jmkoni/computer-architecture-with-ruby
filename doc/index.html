<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-Computer+Architecture...+with+Ruby">Computer Architecture… with Ruby</h1>

<p>While learning more about computer architecture, I wrote some Ruby scripts:</p>
<ul><li>
<p>MIPS Disassembler - a program that takes an array of hex or binary and
translates it into MIPS instructions</p>
</li><li>
<p>Cache Simulation - a program that takes an array or instructions,
addresses, and data and updates a simulated cache. Could be altered to take
user input.</p>
</li><li>
<p>Pipeline Simulation - a program that takes an array of instructions and
passes them through each step of a simulated pipeline, updating the
registers on each.</p>
</li></ul>
<hr>

<h3 id="label-MIPS+Disassembler">MIPS Disassembler</h3>

<p>This class disassembles instructions from hex or binary to human readable
Mips</p>

<h4 id="label-Initialization-3A">Initialization:</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>MipsDisassember</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_array_of_instructions'>array_of_instructions</span><span class='comma'>,</span> <span class='id identifier rubyid_starting_address'>starting_address</span><span class='comma'>,</span> <span class='id identifier rubyid_is_hex'>is_hex</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Definition+of+parameters-3A">Definition of parameters:</h4>
<ul><li>
<p>array_of_instructions: an array of instructions in hex or binary. Will
generally be strings.</p>
</li><li>
<p>starting_address: whatever address you want the instructions to start at</p>
</li><li>
<p>is_hex: true or false, depending on whether or not the instructions are hex
or not true if hex, false if binary</p>
</li></ul>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_array_of_hex'>array_of_hex</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x022DA822</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x8EF30018</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x12A70004</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x02689820</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0xAD930018</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x02697824</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0xAD8FFFF4</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x018C6020</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x02A4A825</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x158FFFF6</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x8E59FFF0</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

<span class='id identifier rubyid_mips'>mips</span> <span class='op'>=</span> <span class='const'>MipsDisassembler</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_array_of_hex'>array_of_hex</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7A060</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_mips'>mips</span><span class='period'>.</span><span class='id identifier rubyid_disassemble'>disassemble</span>
<span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_instruction'>instruction</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_instruction'>instruction</span> <span class='rbrace'>}</span>
</code></pre>

<h4 id="label-Output-3A">Output:</h4>

<pre class="code ruby"><code class="ruby">7A060 sub $21 $17 $13
7a064 lw $19, 24 ($23)
7a068 beq $7, $21, address 0x7a07c
7a06c add $19 $19 $8
7a070 sw $19, 24 ($12)
7a074 and $15 $19 $9
7a078 sw $15, -12 ($12)
7a07c add $12 $12 $12
7a080 or $21 $21 $4
7a084 bne $15, $12, address 0xba060
7a088 lw $25, -16 ($18)</code></pre>
<hr>

<h3 id="label-Cache+Simulation">Cache Simulation</h3>

<p>This class creates a simulation of a cache. Currently it is built to take
in an array of actions. It could easily be rewritten to take in user input
instead.</p>

<h4 id="label-Initialization-3A">Initialization:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'>CacheSim</span><span class='op'>::</span><span class='const'>Cache</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Definition+of+parameters-3A">Definition of parameters:</h4>
<ul><li>
<p>size: integer, reflects the number and size of slots. Ex. with this one,
there are 16 slots and each slot has space for 16 pieces of data</p>
</li><li>
<p>operations: a list of operations Ex: [“R”, “4C3”, “D”, “W”, “14C”, “99”]</p>
</li></ul>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'>CacheSim</span><span class='op'>::</span><span class='const'>Cache</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_perform_actions'>perform_actions</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>R</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4C3</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>D</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>W</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>14C</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>99</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Output">Output</h4>

<pre class="code ruby"><code class="ruby">(R)ead, (W)rite, or (D)isplay cache?
R
What address would you like read?
4C3
At that byte, there is the value c3 (Cache miss)
(R)ead, (W)rite, or (D)isplay cache?
D
Slot | Valid | Tag | Data
  0  |   1   |  0  | 0 1 2 3 4 5 6 7 8 9 a b c d e f
  1  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  2  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  3  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  4  |   1   |  1  | 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f
  5  |   1   |  1  | 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f
  6  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  7  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  8  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  9  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  a  |   1   |  3  | a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af
  b  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  c  |   1   |  4  | c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf
  d  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  e  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
  f  |   0   |  0  | 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
(R)ead, (W)rite, or (D)isplay cache?
W
What address would you like to write to?
14C
What data would you like to write at that address?
99</code></pre>
<hr>

<h3 id="label-Pipeline+Simulation">Pipeline Simulation</h3>

<p>This class creates a simulation of a pipeline.</p>

<h4 id="label-Initialization-3A">Initialization:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_simulation'>simulation</span> <span class='op'>=</span> <span class='const'>PipelineSim</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_starting_address'>starting_address</span><span class='rparen'>)</span>
<span class='id identifier rubyid_simulation'>simulation</span><span class='period'>.</span><span class='id identifier rubyid_runthrough'>runthrough</span><span class='lparen'>(</span><span class='id identifier rubyid_instructions'>instructions</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Definition+of+parameters-3A">Definition of parameters:</h4>
<ul><li>
<p>starting_address: starting address of the first instruction (in hex)</p>
</li><li>
<p>instructions: array of mips instructions, in hex</p>
</li></ul>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_instructions'>instructions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00a63820</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x8d0f0004</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0xad09fffc</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00625022</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00000000</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00000000</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00000000</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x00000000</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='id identifier rubyid_simulation'>simulation</span> <span class='op'>=</span> <span class='const'>PipelineSim</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0x70000</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_simulation'>simulation</span><span class='period'>.</span><span class='id identifier rubyid_runthrough'>runthrough</span><span class='lparen'>(</span><span class='id identifier rubyid_instructions'>instructions</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Output">Output</h4>

<pre class="code ruby"><code class="ruby">-----------------
| Clock Cycle 1 |
-----------------
Regs: 0, 101, 102, 103, 104, 105, 106, 107, 108, 109, 10a, 10b, 10c, 10d, 10e, 10f, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 11a, 11b, 11c, 11d, 11e, 11f, 120


IF/ID Register Write
--------------------
instruction = 0xa1020000  incrPC = 70004

IF/ID Register Read
--------------------
instruction = 0x00000000


ID/EX Register Write
--------------------
control = 000000000

ID/EX Register Read
--------------------
control = 000000000


EX/MEM Register Write
--------------------
control = 000000000

EX/MEM Register Read
--------------------
control = 000000000


MEM/WB Register Write
--------------------
control = 000000000

MEM/WB Register Read
--------------------
control = 000000000


-----------------
| Clock Cycle 2 |
-----------------
Regs: 0, 101, 102, 103, 104, 105, 106, 107, 108, 109, 10a, 10b, 10c, 10d, 10e, 10f, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 11a, 11b, 11c, 11d, 11e, 11f, 120


IF/ID Register Write
--------------------
instruction = 0x810AFFFC  incrPC = 70008

IF/ID Register Read
--------------------
instruction = 0xa1020000  incrPC = 70004


ID/EX Register Write
--------------------
Control: regWrite = 0, regDest = X, memToReg = X, memRead = 0, memWrite = 1, aLUSrc = 1, branch = 0, aLUOp = 0,
sEOffset = 0  function = X  writeReg_15_11 = 0  writeReg_20_16 = 2  readReg1Value = 108  readReg2Value = 102  incrPC = 70004

ID/EX Register Read
--------------------
control = 000000000


EX/MEM Register Write
--------------------
control = 000000000

EX/MEM Register Read
--------------------
control = 000000000


MEM/WB Register Write
--------------------
control = 000000000

MEM/WB Register Read
--------------------
control = 000000000</code></pre>
</div></div>

      <div id="footer">
  Generated on Mon Nov 28 10:31:50 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.2.1).
</div>

    </div>
  </body>
</html>